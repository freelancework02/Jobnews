<!DOCTYPE html>
<html lang="mr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>Job Details | Majha Job Portal</title>
    <!-- We will update SEO tags dynamically via JS if needed, but for better SEO, Server Side Rendering is preferred. 
         For this static setup, these are placeholders. -->

    <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>

    <header>
        <div class="container">
            <nav>
                <a href="index.html" class="logo">
                    <img src="weblogo.png" alt="‡§Æ‡§æ‡§ù‡§æ ‡§ú‡•â‡§¨ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤">
                </a>
                <div class="nav-links">
                    <a href="index.html">‡§Æ‡•Å‡§ñ‡•ç‡§Ø‡§™‡•É‡§∑‡•ç‡§†</a>
                    <a href="#">‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§®‡•ã‡§ï‡§∞‡•Ä</a>
                </div>
            </nav>
        </div>
    </header>

    <div class="container">
        <!-- Top Ad -->
        <div class="ad-banner">
            Google AdSense - Leaderboard
        </div>

        <div class="main-content">
            <main>
                <div id="job-detail-container" class="job-detail-box">
                    <div style="text-align:center; padding: 40px;">
                        Loading job details...
                    </div>
                </div>
            </main>

            <aside>
                <div class="ad-sidebar">
                    Google AdSense - Sidebar
                </div>

                <div class="sidebar-widget">
                    <h3>‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§á‡§§‡§∞ ‡§®‡•ã‡§ï‡§±‡•ç‡§Ø‡§æ</h3>
                    <ul style="padding-left: 20px;">
                        <li><a href="index.html">‡§Æ‡•Å‡§ñ‡•ç‡§Ø‡§™‡•É‡§∑‡•ç‡§† ‡§™‡§π‡§æ</a></li>
                    </ul>
                </div>
            </aside>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 ‡§Æ‡§æ‡§ù‡§æ ‡§ú‡•â‡§¨ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤.</p>
        </div>
    </footer>

    <!-- Script to Load Job Details -->
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const container = document.getElementById('job-detail-container');

            // Get ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const jobId = urlParams.get('id');

            if (!jobId) {
                container.innerHTML = '<p style="text-align:center;">Job ID missing. <a href="index.html">Go Home</a></p>';
                return;
            }

            // Mock Data for fallback (shared with index.html for consistency)
            const MOCK_JOBS = [
                {
                    id: 1,
                    title: "‡§§‡§≤‡•ç‡§π‡§æ‡§†‡•Ä ‡§≠‡§∞‡§§‡•Ä 2025 - ‡•™‡•¶‡•¶‡•¶+ ‡§ú‡§æ‡§ó‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§ú‡§æ‡§π‡§ø‡§∞‡§æ‡§§ ‡§™‡•ç‡§∞‡§∏‡§ø‡§¶‡•ç‡§ß",
                    department: "‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§∂‡§æ‡§∏‡§® (Revenue Dept)",
                    last_date: "2025-01-30",
                    short_desc: "‡§Æ‡§π‡§∏‡•Ç‡§≤ ‡§µ‡§ø‡§≠‡§æ‡§ó‡§æ‡§Ç‡§§‡§∞‡•ç‡§ó‡§§ ‡§§‡§≤‡§æ‡§†‡•Ä ‡§™‡§¶‡§æ‡§∏‡§æ‡§†‡•Ä ‡§¨‡§Ç‡§™‡§∞ ‡§≠‡§∞‡§§‡•Ä ‡§∏‡•Å‡§∞‡•Ç ‡§ù‡§æ‡§≤‡•Ä ‡§Ü‡§π‡•á. ‡§™‡§¶‡§µ‡•Ä‡§ß‡§∞ ‡§â‡§Æ‡•á‡§¶‡§µ‡§æ‡§∞‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§∏‡•Å‡§µ‡§∞‡•ç‡§£‡§∏‡§Ç‡§ß‡•Ä.",
                    vacancy: "4122 Posts",
                    location: "All Maharashtra",
                    salary: "‚Çπ25,500 - ‚Çπ81,100",
                    full_desc: "Maharashtra Talathi Bharti 2025 is expected to recruit over 4000 vacancies. \n\nEligibility: Any Graduate.\nAge Limit: 18 to 38 years (Relaxation applicable).\n\nExam Pattern:\n- Marathi\n- English\n- GK\n- Math/Reasoning\n\nApply online before the last date.",
                    apply_link: "#"
                },
                {
                    id: 2,
                    title: "‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§∞‡•á‡§≤‡•ç‡§µ‡•á ‡§≠‡§∞‡§§‡•Ä 2025 - 10‡§µ‡•Ä, 12‡§µ‡•Ä ‡§™‡§æ‡§∏ ‡§∏‡§æ‡§†‡•Ä ‡§∏‡§Ç‡§ß‡•Ä",
                    department: "Indian Railways (RRB)",
                    last_date: "2025-02-15",
                    short_desc: "‡§∞‡•á‡§≤‡•ç‡§µ‡•á ‡§∞‡§ø‡§ï‡•ç‡§∞‡•Ç‡§ü‡§Æ‡•á‡§Ç‡§ü ‡§¨‡•ã‡§∞‡•ç‡§° (RRB) ‡§®‡•á ‡§ó‡§ü ‡§° ‡§™‡§¶‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§Ö‡§∞‡•ç‡§ú ‡§Æ‡§æ‡§ó‡§µ‡§≤‡•á ‡§Ü‡§π‡•á‡§§. ‡§Ü‡§ú‡§ö ‡§Ö‡§∞‡•ç‡§ú ‡§ï‡§∞‡§æ.",
                    vacancy: "12000+ Posts",
                    location: "All India",
                    salary: "Level 1 (7th CPC)",
                    full_desc: "RRB Group D Recruitment 2025 notification has been released. \n\nQualification: 10th Pass or ITI.\nSelection Process: CBT, PET, Document Verification.",
                    apply_link: "#"
                },
                {
                    id: 3,
                    title: "‡§¨‡§Å‡§ï ‡§ë‡§´ ‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§™‡•Ä‡§ì ‡§≠‡§∞‡§§‡•Ä - ‡§™‡§ó‡§æ‡§∞ ‡•´‡•¶,‡•¶‡•¶‡•¶+",
                    department: "Bank of Maharashtra",
                    last_date: "2025-02-10",
                    short_desc: "‡§™‡•ç‡§∞‡•ã‡§¨‡•á‡§∂‡§®‡§∞‡•Ä ‡§ë‡§´‡§ø‡§∏‡§∞ ‡§™‡§¶‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§Ö‡§∞‡•ç‡§ú ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∏‡•Å‡§∞‡•Ç. ‡§ú‡§æ‡§£‡•Ç‡§® ‡§ò‡•ç‡§Ø‡§æ ‡§™‡§æ‡§§‡•ç‡§∞‡§§‡§æ ‡§Ü‡§£‡§ø ‡§®‡§ø‡§ï‡§∑.",
                    vacancy: "500 Posts",
                    location: "Mumbai/Pune/All India",
                    salary: "‚Çπ50,000+",
                    full_desc: "Bank of Maharashtra PO Recruitment 2025.\n\nRole: Probationary Officer.\nScale: I.\n\nRequires valid IBPS PO score or separate exam.",
                    apply_link: "#"
                }
            ];

            try {
                let jobs = [];

                try {
                    const response = await fetch('/.netlify/functions/manageJobs');
                    if (!response.ok) throw new Error("Network response was not ok");
                    jobs = await response.json();
                } catch (fetchErr) {
                    console.warn("Fetch failed, loading MOCK data for demo:", fetchErr);
                    // Fallback to Mock Data
                    jobs = MOCK_JOBS;
                }

                const job = jobs.find(j => j.id == jobId);

                if (!job) {
                    container.innerHTML = '<p style="text-align:center;">Job not found. <a href="index.html">Go Home</a></p>';
                    return;
                }

                // Update Page Title
                document.title = `${job.title} - Majha Job Portal`;

                // Render Content
                container.innerHTML = `
                    <h1 class="job-title">${escapeHtml(job.title)}</h1>
                    <p class="meta-info">üìÖ Last Date: ${job.last_date} | üìç ${escapeHtml(job.location)}</p>

                    <div class="ad-banner" style="height: auto; min-height: 90px; margin: 10px 0;">
                        Google AdSense - Article Top
                    </div>

                    <p><strong>${escapeHtml(job.department)}</strong> has announced a new recruitment drive.</p>
                    
                    <h2>Overview</h2>
                    <table class="info-table">
                        <tr><th>Department</th><td>${escapeHtml(job.department)}</td></tr>
                        <tr><th>Post Name</th><td>${escapeHtml(job.title)}</td></tr>
                        <tr><th>Vacancy</th><td>${escapeHtml(job.vacancy)}</td></tr>
                        <tr><th>Location</th><td>${escapeHtml(job.location)}</td></tr>
                        <tr><th>Salary</th><td>${escapeHtml(job.salary)}</td></tr>
                        <tr><th>Last Date</th><td>${job.last_date}</td></tr>
                    </table>

                     <h2>Full Description</h2>
                    <div style="line-height:1.8;">
                        ${job.full_desc ? job.full_desc.replace(/\n/g, '<br>') : 'No details provided.'}
                    </div>

                    <div style="text-align: center; margin: 30px 0;">
                        <a href="https://api.whatsapp.com/send?text=*${encodeURIComponent(job.title)}*%0A%0APlease check: ${window.location.href}"
                           target="_blank" class="share-btn-whatsapp">
                            üì± Share on WhatsApp
                        </a>
                    </div>

                    <div style="text-align: center; margin-top: 20px;">
                        <a href="${job.apply_link}" target="_blank" class="btn-read" style="padding: 15px 30px; font-size: 1.1rem; cursor: pointer;">
                            Apply Online Now (Link)
                        </a>
                    </div>
                `;

            } catch (error) {
                console.error(error);
                container.innerHTML = '<p style="text-align:center; color:red;">Error loading details.</p>';
            }
        });

        function escapeHtml(text) {
            if (!text) return '';
            return text
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // --- Load Custom Ads ---
        document.addEventListener('DOMContentLoaded', () => {
            // Wait for DOM
            setTimeout(applyCustomAds, 100);
        });

        function applyCustomAds() {
            const adsConfig = JSON.parse(localStorage.getItem('site_ads_config') || '{}');

            const replaceAd = (containerClass, imgData, index = 0) => {
                if (!imgData) return;
                const els = document.querySelectorAll(containerClass);
                if (els[index]) {
                    els[index].innerHTML = `<img src="${imgData}" style="width:100%; height:100%; object-fit:cover;">`;
                    els[index].style.border = 'none';
                    els[index].style.background = 'transparent';
                    els[index].innerText = '';
                }
            };

            // Layout in detail.html:
            // .ad-banner (Top) -> Index 0
            // .ad-banner (Article Top) -> Index 1 (Inside main content)

            // Sidebar:
            // .ad-sidebar (Top of sidebar) -> Index 0

            if (adsConfig.topBanner) {
                replaceAd('.ad-banner', adsConfig.topBanner, 0);
            }

            if (adsConfig.sidebar1) {
                replaceAd('.ad-sidebar', adsConfig.sidebar1, 0);
            }

            // If we want same sticky ad logic or re-use slots:
            if (adsConfig.sidebar2) {
                // Detail page only has 1 sidebar placeholder currently in my view
                // Let's check if there is a second one?
                // Checking previous view: There is only one .ad-sidebar div in sidebar.
                // So sidebar2 (Sticky) might not have a slot, or I should add one.
            }
        }
    </script>

</body>

</html>