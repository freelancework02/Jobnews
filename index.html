<!DOCTYPE html>
<html lang="mr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>नवीन सरकारी नोकरी 2025 | Latest Govt Jobs in Maharashtra</title>
    <meta name="description"
        content="महाराष्ट्रातील सर्व सरकारी आणि खाजगी नोकर भरती, निकाल, आणि प्रवेशपत्राची माहिती मराठीत मिळवा.">
    <meta name="keywords" content="सरकारी नोकरी, सरकारी भरती, Government Jobs Marathi, Majha Job, Talathi Bharti">

    <!-- Open Graph (For WhatsApp/Social Sharing) -->
    <meta property="og:title" content="नवीन सरकारी नोकरी 2025 - Majha Job Portal">
    <meta property="og:description" content="आजच अर्ज करा! महाराष्ट्रातील नवीन भरतीची माहिती.">
    <meta property="og:image" content="https://yourwebsite.com/images/logo-share.jpg">
    <meta property="og:url" content="https://yourwebsite.com">
    <meta property="og:type" content="website">

    <!-- Fonts & CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Google AdSense Script (Place your code here) -->
    <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script> -->
</head>

<body>

    <!-- Header -->
    <header>
        <div class="container">
            <nav>
                <a href="index.html" class="logo">
                    <img src="weblogo.png" alt="माझा जॉब पोर्टल">
                </a>
                <div class="nav-links">
                    <a href="index.html">मुख्यपृष्ठ</a>
                    <a href="#">सरकारी नोकरी</a>
                    <a href="#">प्रवेशपत्र</a>
                </div>
            </nav>
        </div>
    </header>

    <div class="container">
        <!-- Top Ad Banner -->
        <div class="ad-banner">
            Google AdSense - Top Leaderboard (728x90)
        </div>

        <div class="main-content">
            <!-- Left Column: Job List -->
            <main class="left-column">
                <h1 class="section-title">नवीनतम नोकर भरती (Latest Jobs)</h1>

                <div id="jobsContainer"></div>
                <!-- In-Feed Ad Placeholder -->
                <div class="ad-banner" style="height: 100px;">
                    Google AdSense - In-Feed Ad
                </div>

            </main>

            <!-- Right Sidebar -->
            <aside>
                <!-- Sidebar Ad 1 -->
                <div class="ad-sidebar">
                    Google AdSense - Sidebar (300x250)
                </div>

                <div class="sidebar-widget" style="border-left: 5px solid #25D366;">
                    <h3>आमच्या ग्रुपला जॉईन करा</h3>
                    <p>दररोज नवीन अपडेट्स मिळवण्यासाठी आमचा व्हॉट्सअ‍ॅप ग्रुप जॉईन करा.</p>
                    <a href="#" class="share-btn-whatsapp">WhatsApp Group Join</a>
                </div>

                <!-- Sidebar Ad 2 -->
                <div class="ad-sidebar">
                    Google AdSense - Sticky Ad
                </div>
            </aside>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 माझा जॉब पोर्टल. सर्व हक्क राखीव.</p>
            <p><a href="#">प्रायव्हसी पॉलिसी</a> | <a href="#">संपर्क</a></p>
        </div>
    </footer>

</body>

<script>
    const API_URL = '/.netlify/functions/manageJobs';

    // Mock Data for fallback (When running locally without server or fetch fails)
    const MOCK_JOBS = [
        {
            id: 1,
            title: "तल्हाठी भरती 2025 - ४०००+ जागांसाठी जाहिरात प्रसिद्ध",
            department: "महाराष्ट्र शासन (Revenue Dept)",
            last_date: "2025-01-30",
            short_desc: "महसूल विभागांतर्गत तलाठी पदासाठी बंपर भरती सुरू झाली आहे. पदवीधर उमेदवारांसाठी सुवर्णसंधी.",
            vacancy: "4122 Posts",
            apply_link: "#"
        },
        {
            id: 2,
            title: "भारतीय रेल्वे भरती 2025 - 10वी, 12वी पास साठी संधी",
            department: "Indian Railways (RRB)",
            last_date: "2025-02-15",
            short_desc: "रेल्वे रिक्रूटमेंट बोर्ड (RRB) ने गट ड पदांसाठी अर्ज मागवले आहेत. आजच अर्ज करा.",
            vacancy: "12000+ Posts",
            apply_link: "#"
        },
        {
            id: 3,
            title: "बँक ऑफ महाराष्ट्र पीओ भरती - पगार ५०,०००+",
            department: "Bank of Maharashtra",
            last_date: "2025-02-10",
            short_desc: "प्रोबेशनरी ऑफिसर पदासाठी ऑनलाइन अर्ज प्रक्रिया सुरू. जाणून घ्या पात्रता आणि निकष.",
            vacancy: "500 Posts",
            apply_link: "#"
        }
    ];

    document.addEventListener("DOMContentLoaded", loadPublicJobs);

    async function loadPublicJobs() {
        const container = document.getElementById("jobsContainer");
        container.innerHTML = `<p style="padding:20px;text-align:center;">लोड होत आहे... (Loading Jobs...)</p>`;

        // --- Load Custom Ads ---
        if (typeof applyCustomAds === 'function') applyCustomAds();

        try {
            // Check if we are on file protocol or localhost without server
            // In a real scenario, you try fetch first.
            let jobs = [];

            try {
                const res = await fetch(API_URL);
                if (!res.ok) throw new Error("Network response was not ok");
                jobs = await res.json();
            } catch (fetchErr) {
                console.warn("Fetch failed, loading MOCK data for demo purpose:", fetchErr);
                // Fallback to MOCK DATA if fetch fails (e.g. CORS or 404)
                jobs = MOCK_JOBS;
            }

            console.log("Public Jobs:", jobs);

            if (!jobs || jobs.length === 0) {
                container.innerHTML = `<p style="padding:20px;text-align:center;">सध्या कोणतीही भरती उपलब्ध नाही.</p>`;
                return;
            }

            container.innerHTML = "";

            jobs.forEach(job => {
                const lastDate = job.last_date
                    ? new Date(job.last_date).toLocaleDateString("mr-IN")
                    : "N/A";

                const card = document.createElement("article");
                card.className = "job-card";

                card.innerHTML = `
                <h2>${job.title}</h2>

                <div class="meta-info">
                    <span><i class="fas fa-building"></i> ${job.department || "Govt Dept"}</span>
                    <span><i class="fas fa-calendar-alt"></i> अंतिम दिनांक: ${lastDate}</span>
                </div>

                <p class="job-desc">${job.short_desc || ""}</p>

                <a href="detail.html?id=${job.id}" class="btn-read">
                    सविस्तर माहिती वाचा &raquo;
                </a>
            `;

                container.appendChild(card);
            });

        } catch (err) {
            console.error(err);
            container.innerHTML = `<p style="color:red;text-align:center;padding:20px;">
            जॉब लोड करण्यात समस्या आली. (Technical Error: ${err.message})
        </p>`;
        }
    }


    function applyCustomAds() {
        const adsConfig = JSON.parse(localStorage.getItem('site_ads_config') || '{}');

        const replaceAd = (containerClass, imgData, index = 0) => {
            if (!imgData) return;
            const els = document.querySelectorAll(containerClass);
            if (els[index]) {
                els[index].innerHTML = `<img src="${imgData}" style="width:100%; height:100%; object-fit:cover;">`;
                els[index].style.border = 'none';
                els[index].style.background = 'transparent';
                els[index].innerText = ''; // Clear text
            }
        };

        // 1. Top Leaderboard (First .ad-banner)
        if (adsConfig.topBanner) replaceAd('.ad-banner', adsConfig.topBanner, 0);

        // Sidebar Ads (.ad-sidebar)
        // 2. Sidebar Square (First .ad-sidebar)
        if (adsConfig.sidebar1) replaceAd('.ad-sidebar', adsConfig.sidebar1, 0);

        // 3. Sidebar Sticky (Second .ad-sidebar)
        if (adsConfig.sidebar2) replaceAd('.ad-sidebar', adsConfig.sidebar2, 1);
    }
</script>


</html>